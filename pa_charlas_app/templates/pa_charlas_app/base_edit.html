{% extends 'pa_charlas_app/base.html' %}

{% load bootstrap4 %}

{% block content %}
	<h2>{{ titulo }}</h2>
	<form method="POST">{% csrf_token %}
		<input type="hidden" name="url_donde_volver" value="{{ url_donde_volver }}">
		<input type="hidden" name="extra_form_data" value="{{ extra_form_data }}">
		{% bootstrap_form form %}

		{% bootstrap_button 'Guardar' button_type='submit' %}

		<input type="text" 
			placeholder="Tags y Usuarios" 
			onkeyup="showTagButtons(this.value, '#botonesParaTags', '#id_texto')"
		>

	</form>
	<div id="botonesParaTags"></div>
{% endblock %}

{% block extra_js%}
	<script>
		window.addEventListener('beforeunload', function (e) {//U: captura el evento 'cerrar la ventana'
			const element = document.getElementById('id_texto'); //U: me guardo el textArea
			
			if(element && element.value !=''){ //U: el formulario exite y tiene texto
				e.preventDefault(); //U: evito que se cierre la ventana
				e.returnValue = 'Â¿Desea salir y perder los cambios?';	
			}
		});
	</script>
{% endblock extra_js%}